<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3609px" preserveAspectRatio="none" style="width:2958px;height:3609px;background:#FFFFFF;" version="1.1" viewBox="0 0 2958 3609" width="2958px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="569" x="1190.5" y="27.9951">AI Present Finder System - Sequence Diagram of Events and Commands</text><rect fill="#ADD8E6" height="3560.2422" style="stroke:#181818;stroke-width:0.5;" width="258" x="1953" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146" x="2009" y="55.3638">Fetch Microservices</text><rect fill="#FFFFFF" height="81.832" style="stroke:#181818;stroke-width:1.0;" width="10" x="603" y="192.8594"/><rect fill="#FFFFFF" height="248.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="603" y="387.7891"/><rect fill="#FFFFFF" height="2757.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="603" y="741.3828"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="314.3906"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="459.0547"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1023" y="517.3203"/><rect fill="#FFFFFF" height="1125.7188" style="stroke:#181818;stroke-width:1.0;" width="10" x="1126.5" y="997.5781"/><rect fill="#FFFFFF" height="1308.6484" style="stroke:#181818;stroke-width:1.0;" width="10" x="1390.5" y="894.0469"/><rect fill="#FFFFFF" height="1141.2031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1636.5" y="1735.8984"/><rect fill="#FFFFFF" height="643.2266" style="stroke:#181818;stroke-width:1.0;" width="10" x="1972.5" y="2544.4219"/><rect fill="#FFFFFF" height="500.9531" style="stroke:#181818;stroke-width:1.0;" width="10" x="2033.5" y="2686.6953"/><rect fill="#FFFFFF" height="441.8828" style="stroke:#181818;stroke-width:1.0;" width="10" x="2098" y="2745.7656"/><rect fill="#FFFFFF" height="382.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="2167" y="2804.8359"/><rect fill="#FFFFFF" height="883.5547" style="stroke:#181818;stroke-width:1.0;" width="10" x="2654" y="2544.4219"/><rect fill="none" height="222.1953" style="stroke:#000000;stroke-width:1.5;" width="1051.5" x="560" y="840.6484"/><rect fill="none" height="506.3906" style="stroke:#000000;stroke-width:1.5;" width="1075.5" x="302" y="1119.9766"/><rect fill="none" height="475.9297" style="stroke:#000000;stroke-width:1.5;" width="1967.5" x="10" y="1640.3672"/><rect fill="none" height="436.3438" style="stroke:#000000;stroke-width:1.5;" width="1182.5" x="1555.5" y="2433.7578"/><rect fill="none" height="303.6797" style="stroke:#000000;stroke-width:1.5;" width="798.5" x="1565.5" y="2559.4219"/><rect fill="none" height="253.4141" style="stroke:#000000;stroke-width:1.5;" width="791" x="1947" y="2927.2344"/><rect fill="none" height="189.9297" style="stroke:#000000;stroke-width:1.5;" width="2639" x="302" y="3317.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="331" x2="331" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="608" x2="608" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="918.5" x2="918.5" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1027.5" x2="1027.5" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1131.5" x2="1131.5" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1395.5" x2="1395.5" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1641.5" x2="1641.5" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1977" x2="1977" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2038" x2="2038" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2103" x2="2103" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2172" x2="2172" y1="118.5938" y2="3524.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2659" x2="2659" y1="118.5938" y2="3524.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="312" y="115.292">User</text><ellipse cx="331" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M331,58.7969 L331,85.7969 M318,66.7969 L344,66.7969 M331,85.7969 L318,100.7969 M331,85.7969 L344,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="312" y="3536.2373">User</text><ellipse cx="331" cy="3548.0391" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M331,3556.0391 L331,3583.0391 M318,3564.0391 L344,3564.0391 M331,3583.0391 L318,3598.0391 M331,3583.0391 L344,3598.0391 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="570" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="577" y="107.292">REST API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="570" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="577" y="3543.2373">REST API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="863.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="870.5" y="107.292">Google OAuth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="863.5" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="870.5" y="3543.2373">Google OAuth</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="984.5" y="115.292">PostgreSQL</text><path d="M1010,66.2969 C1010,56.2969 1028,56.2969 1028,56.2969 C1028,56.2969 1046,56.2969 1046,66.2969 L1046,92.2969 C1046,102.2969 1028,102.2969 1028,102.2969 C1028,102.2969 1010,102.2969 1010,92.2969 L1010,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1010,66.2969 C1010,76.2969 1028,76.2969 1028,76.2969 C1028,76.2969 1046,76.2969 1046,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="984.5" y="3536.2373">PostgreSQL</text><path d="M1010,3549.5391 C1010,3539.5391 1028,3539.5391 1028,3539.5391 C1028,3539.5391 1046,3539.5391 1046,3549.5391 L1046,3575.5391 C1046,3585.5391 1028,3585.5391 1028,3585.5391 C1028,3585.5391 1010,3585.5391 1010,3575.5391 L1010,3549.5391 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1010,3549.5391 C1010,3559.5391 1028,3559.5391 1028,3559.5391 C1028,3559.5391 1046,3559.5391 1046,3549.5391 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1081.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1088.5" y="107.292">Chat Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1081.5" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1088.5" y="3543.2373">Chat Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1334.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1341.5" y="107.292">Stalking Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1334.5" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1341.5" y="3543.2373">Stalking Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="1575.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1582.5" y="107.292">Gift Ideas Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="1575.5" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1582.5" y="3543.2373">Gift Ideas Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="1957" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1964" y="107.292">OLX</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="1957" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1964" y="3543.2373">OLX</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="2008" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="2015" y="107.292">Allegro</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="2008" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="2015" y="3543.2373">Allegro</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="2079" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="2086" y="107.292">eBay</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="2079" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="2086" y="3543.2373">eBay</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="2137" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="2144" y="107.292">Amazon</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="2137" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="2144" y="3543.2373">Amazon</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="2590" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2597" y="107.292">Reranking Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="2590" y="3523.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2597" y="3543.2373">Reranking Service</text><rect fill="#FFFFFF" height="81.832" style="stroke:#181818;stroke-width:1.0;" width="10" x="603" y="192.8594"/><rect fill="#FFFFFF" height="248.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="603" y="387.7891"/><rect fill="#FFFFFF" height="2757.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="603" y="741.3828"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="314.3906"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="459.0547"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1023" y="517.3203"/><rect fill="#FFFFFF" height="1125.7188" style="stroke:#181818;stroke-width:1.0;" width="10" x="1126.5" y="997.5781"/><rect fill="#FFFFFF" height="1308.6484" style="stroke:#181818;stroke-width:1.0;" width="10" x="1390.5" y="894.0469"/><rect fill="#FFFFFF" height="1141.2031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1636.5" y="1735.8984"/><rect fill="#FFFFFF" height="643.2266" style="stroke:#181818;stroke-width:1.0;" width="10" x="1972.5" y="2544.4219"/><rect fill="#FFFFFF" height="500.9531" style="stroke:#181818;stroke-width:1.0;" width="10" x="2033.5" y="2686.6953"/><rect fill="#FFFFFF" height="441.8828" style="stroke:#181818;stroke-width:1.0;" width="10" x="2098" y="2745.7656"/><rect fill="#FFFFFF" height="382.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="2167" y="2804.8359"/><rect fill="#FFFFFF" height="883.5547" style="stroke:#181818;stroke-width:1.0;" width="10" x="2654" y="2544.4219"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2951" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="202" x="1374.5" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="183" x="1380.5" y="154.6606">Autoryzacja u&#380;ytkownika</text><polygon fill="#181818" points="591,188.8594,601,192.8594,591,196.8594,595,192.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="597" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="338" y="187.7935">GET /auth/google/url</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="221.9922" y2="221.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="221.9922" y2="234.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="234.9922" y2="234.9922"/><polygon fill="#181818" points="624,230.9922,614,234.9922,624,238.9922,620,234.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="228" x="620" y="216.9263">GenerateGoogleOAuthUrlQuery</text><polygon fill="#181818" points="342,270.6914,332,274.6914,342,278.6914,338,274.6914" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="336" x2="607" y1="274.6914" y2="274.6914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="348" y="269.6255">{url: "https://accounts.google.com/..."}</text><path d="M143,247.9922 L143,287.9922 L326,287.9922 L326,257.9922 L316,247.9922 L143,247.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M316,247.9922 L316,257.9922 L326,257.9922 L316,247.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="149" y="265.0591">U&#380;ytkownik przekierowuje</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="149" y="280.1919">do Google OAuth</text><polygon fill="#181818" points="902,310.3906,912,314.3906,902,318.3906,906,314.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="908" y1="314.3906" y2="314.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="338" y="309.3247">Autoryzacja w Google</text><polygon fill="#181818" points="342,339.5234,332,343.5234,342,347.5234,338,343.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="336" x2="918" y1="343.5234" y2="343.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="348" y="338.4575">Redirect z kodem autoryzacyjnym</text><polygon fill="#181818" points="591,383.7891,601,387.7891,591,391.7891,595,387.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="597" y1="387.7891" y2="387.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="338" y="367.5903">POST /auth/google/callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="338" y="382.7231">{code}</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="416.9219" y2="416.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="416.9219" y2="429.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="429.9219" y2="429.9219"/><polygon fill="#181818" points="624,425.9219,614,429.9219,624,433.9219,620,429.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="232" x="620" y="411.856">ValidateGoogleTokenCommand</text><polygon fill="#181818" points="902,455.0547,912,459.0547,902,463.0547,906,459.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="908" y1="459.0547" y2="459.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="620" y="453.9888">Wymiana kodu na token</text><polygon fill="#181818" points="624,484.1875,614,488.1875,624,492.1875,620,488.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="618" x2="918" y1="488.1875" y2="488.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="630" y="483.1216">{accessToken, refreshToken, email, name}</text><polygon fill="#181818" points="1011,513.3203,1021,517.3203,1011,521.3203,1015,517.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="1017" y1="517.3203" y2="517.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="620" y="512.2544">Upsert user (email, name, googleTokens)</text><polygon fill="#181818" points="624,542.4531,614,546.4531,624,550.4531,620,546.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="618" x2="1027" y1="546.4531" y2="546.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="630" y="541.3872">User entity</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="575.5859" y2="575.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="575.5859" y2="588.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="588.5859" y2="588.5859"/><polygon fill="#181818" points="624,584.5859,614,588.5859,624,592.5859,620,588.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="620" y="570.52">Generate JWT token</text><polygon fill="#181818" points="342,631.8516,332,635.8516,342,639.8516,338,635.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="336" x2="607" y1="635.8516" y2="635.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="348" y="615.6528">Set-Cookie: access_token (httpOnly)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="348" y="630.7856">{user: {id, email, name}}</text><path d="M81,601.5859 L81,641.5859 L326,641.5859 L326,611.5859 L316,601.5859 L81,601.5859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M316,601.5859 L316,611.5859 L326,611.5859 L316,601.5859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="87" y="618.6528">JWT zapisany w httpOnly cookie</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="87" y="633.7856">Dost&#281;p do chronionych endpoint&#243;w</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2951" x="0" y="667.418"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="667.418" y2="667.418"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="670.418" y2="670.418"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="285" x="1333" y="656.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="266" x="1339" y="672.9185">Start sesji (u&#380;ytkownik zalogowany)</text><polygon fill="#181818" points="591,737.3828,601,741.3828,591,745.3828,595,741.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="597" y1="741.3828" y2="741.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="338" y="706.0513">POST /restapi/stalking-request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="338" y="721.1841">{chatId, social URLs, occasion}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="338" y="736.3169">+ JWT cookie</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="770.5156" y2="770.5156"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="770.5156" y2="783.5156"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="783.5156" y2="783.5156"/><polygon fill="#181818" points="624,779.5156,614,783.5156,624,787.5156,620,783.5156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="101" x="620" y="765.4497">JwtAuthGuard</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="725" y="765.4497">- weryfikacja tokena</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="812.6484" y2="812.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="812.6484" y2="825.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="825.6484" y2="825.6484"/><polygon fill="#181818" points="624,821.6484,614,825.6484,624,829.6484,620,825.6484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192" x="620" y="807.5825">StartProcessingCommand</text><path d="M560,840.6484 L630,840.6484 L630,847.7813 L620,857.7813 L560,857.7813 L560,840.6484 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.1953" style="stroke:#000000;stroke-width:1.5;" width="1051.5" x="560" y="840.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="575" y="853.7153">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="181" x="645" y="852.8589">[Przetwarzanie R&#243;wnoleg&#322;e]</text><polygon fill="#181818" points="1378.5,890.0469,1388.5,894.0469,1378.5,898.0469,1382.5,894.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="1384.5" y1="894.0469" y2="894.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="238" x="620" y="873.8481">StalkingAnalyzeRequestedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="620" y="888.981">{chatId, URLs}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1400.5" x2="1442.5" y1="938.3125" y2="938.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1442.5" x2="1442.5" y1="938.3125" y2="951.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1401.5" x2="1442.5" y1="951.3125" y2="951.3125"/><polygon fill="#181818" points="1411.5,947.3125,1401.5,951.3125,1411.5,955.3125,1407.5,951.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192" x="1407.5" y="918.1138">StalkingAnalyzeCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1407.5" y="933.2466">(analiza profili social media)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="560" x2="1611.5" y1="960.3125" y2="960.3125"/><polygon fill="#181818" points="1114.5,993.5781,1124.5,997.5781,1114.5,1001.5781,1118.5,997.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="1120.5" y1="997.5781" y2="997.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="620" y="977.3794">ChatStartInterviewEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="620" y="992.5122">{chatId, occasion}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1136.5" x2="1178.5" y1="1041.8438" y2="1041.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="1041.8438" y2="1054.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="1054.8438" y2="1054.8438"/><polygon fill="#181818" points="1147.5,1050.8438,1137.5,1054.8438,1147.5,1058.8438,1143.5,1054.8438" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="165" x="1143.5" y="1021.645">SetOccasionCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1143.5" y="1036.7778">{chatId, occasion}</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2951" x="0" y="1090.4102"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="1090.4102" y2="1090.4102"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="1093.4102" y2="1093.4102"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="123" x="1414" y="1079.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104" x="1420" y="1095.9106">Interview loop</text><path d="M302,1119.9766 L379,1119.9766 L379,1127.1094 L369,1137.1094 L302,1137.1094 L302,1119.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="506.3906" style="stroke:#000000;stroke-width:1.5;" width="1075.5" x="302" y="1119.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="317" y="1133.0435">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="462" x="394" y="1132.187">[Dop&#243;ki AI nie zdecyduje zako&#324;czy&#263; lub niew&#322;a&#347;ciwe zachowanie usera]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1136.5" x2="1178.5" y1="1173.375" y2="1173.375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="1173.375" y2="1186.375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="1186.375" y2="1186.375"/><polygon fill="#181818" points="1147.5,1182.375,1137.5,1186.375,1147.5,1190.375,1143.5,1186.375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208" x="1143.5" y="1153.1763">GenerateQuestionCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="1143.5" y="1168.3091">(AI decyduje o nast&#281;pnym pytaniu)</text><polygon fill="#181818" points="624,1226.6406,614,1230.6406,624,1234.6406,620,1230.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="618" x2="1125.5" y1="1230.6406" y2="1230.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186" x="630" y="1210.4419">ChatQuestionAskedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="630" y="1225.5747">{chatId, question}</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="1259.7734" y2="1259.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="1259.7734" y2="1272.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="1272.7734" y2="1272.7734"/><polygon fill="#181818" points="624,1268.7734,614,1272.7734,624,1276.7734,620,1272.7734" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="620" y="1254.7075">NotifyUserSseCommand</text><polygon fill="#181818" points="342,1297.9063,332,1301.9063,342,1305.9063,338,1301.9063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="602" y1="1301.9063" y2="1301.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="348" y="1296.8403">SSE: chatbot-message</text><polygon fill="#181818" points="591,1342.1719,601,1346.1719,591,1350.1719,595,1346.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="597" y1="1346.1719" y2="1346.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="338" y="1325.9731">POST /restapi/send-message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="338" y="1341.106">{chatId, messages}</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="1375.3047" y2="1375.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="1375.3047" y2="1388.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="1388.3047" y2="1388.3047"/><polygon fill="#181818" points="624,1384.3047,614,1388.3047,624,1392.3047,620,1388.3047" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="101" x="620" y="1370.2388">JwtAuthGuard</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="725" y="1370.2388">- weryfikacja tokena</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="1417.4375" y2="1417.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="1417.4375" y2="1430.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="1430.4375" y2="1430.4375"/><polygon fill="#181818" points="624,1426.4375,614,1430.4375,624,1434.4375,620,1430.4375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="211" x="620" y="1412.3716">SendUserMessageCommand</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="1459.5703" y2="1459.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="1459.5703" y2="1472.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="1472.5703" y2="1472.5703"/><polygon fill="#181818" points="624,1468.5703,614,1472.5703,624,1476.5703,620,1472.5703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="620" y="1454.5044">NotifyUserSseCommand</text><polygon fill="#181818" points="342,1512.8359,332,1516.8359,342,1520.8359,338,1516.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="602" y1="1516.8359" y2="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="348" y="1496.6372">SSE: chatbot-message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="348" y="1511.77">(echo wiadomo&#347;ci u&#380;ytkownika)</text><polygon fill="#181818" points="1114.5,1557.1016,1124.5,1561.1016,1114.5,1565.1016,1118.5,1561.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="1120.5" y1="1561.1016" y2="1561.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="181" x="620" y="1540.9028">ChatUserAnsweredEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="620" y="1556.0356">{chatId, messages}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1136.5" x2="1178.5" y1="1605.3672" y2="1605.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="1605.3672" y2="1618.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="1618.3672" y2="1618.3672"/><polygon fill="#181818" points="1147.5,1614.3672,1137.5,1618.3672,1147.5,1622.3672,1143.5,1618.3672" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1143.5" y="1585.1685">GetOccasionQuery</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="1143.5" y="1600.3013">{chatId}</text><path d="M10,1640.3672 L74,1640.3672 L74,1647.5 L64,1657.5 L10,1657.5 L10,1640.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="475.9297" style="stroke:#000000;stroke-width:1.5;" width="1967.5" x="10" y="1640.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="1653.4341">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="209" x="89" y="1652.5776">[Wywiad zako&#324;czony pomy&#347;lnie]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1136.5" x2="1178.5" y1="1678.6328" y2="1678.6328"/><line style="stroke:#181818;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="1678.6328" y2="1691.6328"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="1691.6328" y2="1691.6328"/><polygon fill="#181818" points="1147.5,1687.6328,1137.5,1691.6328,1147.5,1695.6328,1143.5,1691.6328" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="1143.5" y="1673.5669">closeInterview</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="1252.5" y="1673.5669">toolcall</text><polygon fill="#181818" points="1624.5,1731.8984,1634.5,1735.8984,1624.5,1739.8984,1628.5,1735.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1136.5" x2="1630.5" y1="1735.8984" y2="1735.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1143.5" y="1715.6997">ChatInterviewCompletedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1143.5" y="1730.8325">{chatId, profile}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="1688.5" y1="1780.1641" y2="1780.1641"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.5" x2="1688.5" y1="1780.1641" y2="1793.1641"/><line style="stroke:#181818;stroke-width:1.0;" x1="1647.5" x2="1688.5" y1="1793.1641" y2="1793.1641"/><polygon fill="#181818" points="1657.5,1789.1641,1647.5,1793.1641,1657.5,1797.1641,1653.5,1793.1641" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="243" x="1653.5" y="1759.9653">UpdateInterviewStatusCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="1653.5" y="1775.0981">(zapisz profil usera, sprawd&#378; czy stalking gotowy)</text><polygon fill="#181818" points="624,1833.4297,614,1837.4297,624,1841.4297,620,1837.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="618" x2="1125.5" y1="1837.4297" y2="1837.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="233" x="630" y="1817.231">ChatCompletedNotifyUserEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="630" y="1832.3638">{chatId}</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="1866.5625" y2="1866.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="1866.5625" y2="1879.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="1879.5625" y2="1879.5625"/><polygon fill="#181818" points="624,1875.5625,614,1879.5625,624,1883.5625,620,1879.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="620" y="1861.4966">NotifyUserSseCommand</text><polygon fill="#181818" points="342,1915.2617,332,1919.2617,342,1923.2617,338,1919.2617" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="602" y1="1919.2617" y2="1919.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="348" y="1914.1958">SSE: chat-interview-completed</text><path d="M176,1892.5625 L176,1932.5625 L326,1932.5625 L326,1902.5625 L316,1892.5625 L176,1892.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M316,1892.5625 L316,1902.5625 L326,1902.5625 L316,1892.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="182" y="1909.6294">Wywiad zako&#324;czony,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="182" y="1924.7622">ekran &#322;adowania</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1977.5" y1="1938.8281" y2="1938.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="227" x="15" y="1949.0386">[Wykryto niew&#322;a&#347;ciwe zachowanie]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1136.5" x2="1178.5" y1="1973.7656" y2="1973.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="1973.7656" y2="1986.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="1986.7656" y2="1986.7656"/><polygon fill="#181818" points="1147.5,1982.7656,1137.5,1986.7656,1147.5,1990.7656,1143.5,1986.7656" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="191" x="1143.5" y="1968.6997">flagInappropriateRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="1338.5" y="1968.6997">toolcall</text><polygon fill="#181818" points="624,2027.0313,614,2031.0313,624,2035.0313,620,2031.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="618" x2="1125.5" y1="2031.0313" y2="2031.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="237" x="630" y="2010.8325">ChatInappropriateRequestEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="630" y="2025.9653">{chatId, reason}</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="2060.1641" y2="2060.1641"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="2060.1641" y2="2073.1641"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="2073.1641" y2="2073.1641"/><polygon fill="#181818" points="624,2069.1641,614,2073.1641,624,2077.1641,620,2073.1641" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="620" y="2055.0981">NotifyUserSseCommand</text><polygon fill="#181818" points="342,2101.2969,332,2105.2969,342,2109.2969,338,2105.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="602" y1="2105.2969" y2="2105.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="348" y="2100.231">SSE: chat-inappropriate-request</text><path d="M20,2086.1641 L20,2111.1641 L326,2111.1641 L326,2096.1641 L316,2086.1641 L20,2086.1641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M316,2086.1641 L316,2096.1641 L326,2096.1641 L316,2086.1641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="26" y="2103.231">Wywiad zako&#324;czony, nagana dla u&#380;ytkownika</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2951" x="0" y="2143.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="2143.8633" y2="2143.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="2146.8633" y2="2146.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="186" x="1382.5" y="2133.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167" x="1388.5" y="2149.3638">Zako&#324;czenie Stalkingu</text><polygon fill="#181818" points="1624.5,2198.6953,1634.5,2202.6953,1624.5,2206.6953,1628.5,2202.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1395.5" x2="1630.5" y1="2202.6953" y2="2202.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="182" x="1402.5" y="2182.4966">StalkingCompletedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1402.5" y="2197.6294">{keywords, chatId, completedAt}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="1688.5" y1="2246.9609" y2="2246.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.5" x2="1688.5" y1="2246.9609" y2="2259.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="1647.5" x2="1688.5" y1="2259.9609" y2="2259.9609"/><polygon fill="#181818" points="1657.5,2255.9609,1647.5,2259.9609,1657.5,2263.9609,1653.5,2259.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="236" x="1653.5" y="2226.7622">UpdateStalkingStatusCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="1653.5" y="2241.895">(zapisz keywords, sprawd&#378; czy wywiad gotowy)</text><path d="M271,2272.9609 L271,2342.9609 L668,2342.9609 L668,2282.9609 L658,2272.9609 L271,2272.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M658,2272.9609 L658,2282.9609 L668,2282.9609 L658,2272.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="277" y="2290.0278">U&#380;ytkownik pozostaje zalogowany przez ca&#322;y proces.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="376" x="277" y="2305.1606">JWT token w httpOnly cookie jest weryfikowany przy ka&#380;dym</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="277" y="2320.2935">&#380;&#261;daniu do chronionych endpoint&#243;w.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="277" y="2335.4263">SSE u&#380;ywa clientId do identyfikacji, niezale&#380;nie od sesji.</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2951" x="0" y="2369.0586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="2369.0586" y2="2369.0586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="2372.0586" y2="2372.0586"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="294" x="1328.5" y="2358.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="275" x="1334.5" y="2374.5591">Koordynacja Generowania Prezent&#243;w</text><path d="M1544,2396.625 L1544,2421.625 L1738,2421.625 L1738,2406.625 L1728,2396.625 L1544,2396.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1728,2396.625 L1728,2406.625 L1738,2406.625 L1728,2396.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="1550" y="2413.6919">Gdy oba eventy otrzymane</text><path d="M1555.5,2433.7578 L1619.5,2433.7578 L1619.5,2440.8906 L1609.5,2450.8906 L1555.5,2450.8906 L1555.5,2433.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="436.3438" style="stroke:#000000;stroke-width:1.5;" width="1182.5" x="1555.5" y="2433.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1570.5" y="2446.8247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="285" x="1634.5" y="2445.9683">[Zar&#243;wno stalking jak i wywiad zako&#324;czone]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="1688.5" y1="2487.1563" y2="2487.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.5" x2="1688.5" y1="2487.1563" y2="2500.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1647.5" x2="1688.5" y1="2500.1563" y2="2500.1563"/><polygon fill="#181818" points="1657.5,2496.1563,1647.5,2500.1563,1657.5,2504.1563,1653.5,2500.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="210" x="1653.5" y="2466.9575">GenerateGiftIdeasCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="1653.5" y="2482.0903">{userProfile, keywords, chatId}</text><path d="M1875,2459.3906 L1875,2499.3906 L2122,2499.3906 L2122,2469.3906 L2112,2459.3906 L1875,2459.3906 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2112,2459.3906 L2112,2469.3906 L2122,2469.3906 L2112,2459.3906 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1881" y="2476.4575">AI generuje zapytania wyszukiwania</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1881" y="2491.5903">dla wielu serwis&#243;w</text><polygon fill="#181818" points="2642,2540.4219,2652,2544.4219,2642,2548.4219,2646,2544.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="2648" y1="2544.4219" y2="2544.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196" x="1653.5" y="2524.2231">GiftContextInitializedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="1653.5" y="2539.356">{userProfile, keywords, chatId, eventId, totalEvents}</text><path d="M1565.5,2559.4219 L1635.5,2559.4219 L1635.5,2566.5547 L1625.5,2576.5547 L1565.5,2576.5547 L1565.5,2559.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="303.6797" style="stroke:#000000;stroke-width:1.5;" width="798.5" x="1565.5" y="2559.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="1580.5" y="2572.4888">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="187" x="1650.5" y="2571.6323">[R&#243;wnoleg&#322;e &#379;&#261;dania FETCH]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1565.5" x2="2364" y1="2577.5547" y2="2577.5547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="35" x="1570.5" y="2587.7651">[OLX]</text><polygon fill="#181818" points="1960.5,2623.625,1970.5,2627.625,1960.5,2631.625,1964.5,2627.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="1966.5" y1="2627.625" y2="2627.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="1653.5" y="2607.4263">FetchOlxEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1653.5" y="2622.5591">{query, chatId, eventId, totalEvents}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1565.5" x2="2364" y1="2636.625" y2="2636.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1570.5" y="2646.8354">[Allegro]</text><polygon fill="#181818" points="2021.5,2682.6953,2031.5,2686.6953,2021.5,2690.6953,2025.5,2686.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="2027.5" y1="2686.6953" y2="2686.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="134" x="1653.5" y="2666.4966">FetchAllegroEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1653.5" y="2681.6294">{query, chatId, eventId, totalEvents}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1565.5" x2="2364" y1="2695.6953" y2="2695.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1570.5" y="2705.9058">[eBay]</text><polygon fill="#181818" points="2086,2741.7656,2096,2745.7656,2086,2749.7656,2090,2745.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="2092" y1="2745.7656" y2="2745.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118" x="1653.5" y="2725.5669">FetchEbayEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1653.5" y="2740.6997">{query, chatId, eventId, totalEvents}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1565.5" x2="2364" y1="2754.7656" y2="2754.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60" x="1570.5" y="2764.9761">[Amazon]</text><polygon fill="#181818" points="2155,2800.8359,2165,2804.8359,2155,2808.8359,2159,2804.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1646.5" x2="2161" y1="2804.8359" y2="2804.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="1653.5" y="2784.6372">FetchAmazonEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1653.5" y="2799.77">{query, chatId, eventId, totalEvents}</text><path d="M2182,2817.8359 L2182,2857.8359 L2354,2857.8359 L2354,2827.8359 L2344,2817.8359 L2182,2817.8359 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2344,2817.8359 L2344,2827.8359 L2354,2827.8359 L2344,2817.8359 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="2188" y="2834.9028">Wiele zapyta&#324; na serwis</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="2188" y="2850.0356">na podstawie decyzji AI</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2951" x="0" y="2897.668"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="2897.668" y2="2897.668"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2951" y1="2900.668" y2="2900.668"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="292" x="1329.5" y="2887.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="273" x="1335.5" y="2903.1685">Zbieranie Produkt&#243;w i Rerankowanie</text><path d="M1947,2927.2344 L2017,2927.2344 L2017,2934.3672 L2007,2944.3672 L1947,2944.3672 L1947,2927.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="253.4141" style="stroke:#000000;stroke-width:1.5;" width="791" x="1947" y="2927.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="1962" y="2940.3013">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="245" x="2032" y="2939.4448">[Odpowiedzi od wszystkich serwis&#243;w]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1947" x2="2738" y1="2945.3672" y2="2945.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="35" x="1952" y="2955.5776">[OLX]</text><polygon fill="#181818" points="2642,2991.4375,2652,2995.4375,2642,2999.4375,2646,2995.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1982.5" x2="2648" y1="2995.4375" y2="2995.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="1989.5" y="2975.2388">ProductFetchedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="419" x="1989.5" y="2990.3716">{products[], chatId, provider: "olx", success, eventId, totalEvents}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1947" x2="2738" y1="3004.4375" y2="3004.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1952" y="3014.6479">[Allegro]</text><polygon fill="#181818" points="2642,3050.5078,2652,3054.5078,2642,3058.5078,2646,3054.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2043.5" x2="2648" y1="3054.5078" y2="3054.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="2050.5" y="3034.3091">ProductFetchedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="444" x="2050.5" y="3049.4419">{products[], chatId, provider: "allegro", success, eventId, totalEvents}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1947" x2="2738" y1="3063.5078" y2="3063.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1952" y="3073.7183">[eBay]</text><polygon fill="#181818" points="2642,3109.5781,2652,3113.5781,2642,3117.5781,2646,3113.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2108" x2="2648" y1="3113.5781" y2="3113.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="2115" y="3093.3794">ProductFetchedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="432" x="2115" y="3108.5122">{products[], chatId, provider: "ebay", success, eventId, totalEvents}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1947" x2="2738" y1="3122.5781" y2="3122.5781"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60" x="1952" y="3132.7886">[Amazon]</text><polygon fill="#181818" points="2642,3168.6484,2652,3172.6484,2642,3176.6484,2646,3172.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2177" x2="2648" y1="3172.6484" y2="3172.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="2184" y="3152.4497">ProductFetchedEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="453" x="2184" y="3167.5825">{products[], chatId, provider: "amazon", success, eventId, totalEvents}</text><path d="M2463,3192.6484 L2463,3247.6484 L2854,3247.6484 L2854,3202.6484 L2844,3192.6484 L2463,3192.6484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2844,3192.6484 L2844,3202.6484 L2854,3202.6484 L2844,3192.6484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="370" x="2469" y="3209.7153">Reranking Service &#347;ledzi wszystkie przychodz&#261;ce produkty</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="2469" y="3224.8481">wed&#322;ug eventId i czeka, a&#380; wszystkie oczekiwane</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="2469" y="3239.981">zdarzenia nadejd&#261; (totalEvents)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2664" x2="2706" y1="3289.3125" y2="3289.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="2706" y1="3289.3125" y2="3302.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="2665" x2="2706" y1="3302.3125" y2="3302.3125"/><polygon fill="#181818" points="2675,3298.3125,2665,3302.3125,2675,3306.3125,2671,3302.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="2671" y="3269.1138">Zbierz i zagreguj produkty</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="2671" y="3284.2466">ze wszystkich &#378;r&#243;de&#322;</text><path d="M302,3317.3125 L366,3317.3125 L366,3324.4453 L356,3334.4453 L302,3334.4453 L302,3317.3125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="189.9297" style="stroke:#000000;stroke-width:1.5;" width="2639" x="302" y="3317.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="317" y="3330.3794">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="278" x="381" y="3329.5229">[Wszystkie produkty zebrane (lub timeout)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="2664" x2="2706" y1="3370.7109" y2="3370.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="2706" y1="3370.7109" y2="3383.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="2665" x2="2706" y1="3383.7109" y2="3383.7109"/><polygon fill="#181818" points="2675,3379.7109,2665,3383.7109,2675,3387.7109,2671,3383.7109" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="2671" y="3350.5122">AI rerankowanie i filtrowanie</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="2671" y="3365.645">(na podstawie profilu + s&#322;&#243;w kluczowych)</text><polygon fill="#181818" points="624,3423.9766,614,3427.9766,624,3431.9766,620,3427.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="618" x2="2658" y1="3427.9766" y2="3427.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114" x="630" y="3407.7778">GiftReadyEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="630" y="3422.9106">{chatId, giftIdeas[]}</text><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="655" y1="3457.1094" y2="3457.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="655" x2="655" y1="3457.1094" y2="3470.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="655" y1="3470.1094" y2="3470.1094"/><polygon fill="#181818" points="624,3466.1094,614,3470.1094,624,3474.1094,620,3470.1094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="620" y="3452.0435">NotifyUserSseCommand</text><polygon fill="#181818" points="342,3495.2422,332,3499.2422,342,3503.2422,338,3499.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="607" y1="3499.2422" y2="3499.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="348" y="3494.1763">SSE: gift-ready</text><!--SRC=[hLZTKjn65hwVfpZ5tW3XvvugRzNmOqACFPY1UEEGIZLICpJIgCTIoxBaueQAQvzXAu-HkyHtyRpNVgTRqhHc1l2kkQ0qIDtdzplVETr6cLXI_uXEKfd9nD1pbOGofM6P6JccJHhATxbC0adxIenICIPzHGVliJ8ZaOIqfyTZFBDUJmH6ftIUORF8wBmt4QbHWPe825qvFHYUKV_aQ8M_yJ_TpuTQZs36e9-RQxlaS30uF3xeXSA8Iv59MZdHcHcbSlZws7xVt-qAsBiM1gQcxrKWxOAzx_jpEeP6n95AHfrbmxF-yOivMzILeQDGybTlvU7HyxFUfVv0Ay-b2QxffGfIdRa5sGhzurYDhirkdCiUKKVUuFXVLi3pWxEzxt_5V_CB-d4iHwds5lMFZmyEJmVp2-MkABrL1xlzdnPaZKMb4r_Ko_xRmQkUHAfW_5nIP2gIXP2S7fpsNxtezPuz8wH3fsKbWXj1-VHpQI9T92eIzEnPxvms_sapkKE71sUqBP2wxP7DutQUnWm7zLuOwR9jyzzkM5y_b0cK6-aIR_D-diQlSvcMw-lrQYm_tw6F4BP3AzV6JBATxMqH13e7-BQSggr0ZxUtjhPMRdl8M4Tbel4hbbTcXyvdjjCahMIaPAgB_4PU9A4c7tmzvvU3tqud04MzSEPP3LBtQEmzbQ5APM2eeaY7A27Ho2XladBicrdlzqDvCXZEnJ8GSNmfWkWY-HX0tkqZWVrHn2fi0tkc8vdK9Th6TURUctAiH2BOq9pmDBpy8V-Sbez8WimoAto3Kda5whYk_vDZeU8D21lBsoM-DXRixo8h4vIFePmPOzNRjq6ZcV7PsimU5Ft-hcU7vHemaJAbhmhBkb5fm4O_l3chVVGHDfHcSqzhW6A7d6U_saMqog0R976vXk2pcN1TXLqV7yGTwwl4H6KYAO6VHXm5Ljj5iWzI-_AV2G64mNMg4wMJ4jI2OfrebPY__oXi6OAv4ATCPZUALhqwXEnOZtG1wMjp9UbmXBmOgD_EQkhRJ9dCCyDO0c4UmPTC1qh4T7vwd6sG3WAHmOZRY-GxQxmpz178_L0OBft3NAG06Lf6WIg-0armrTX8YeKzrgMJL7EqOTWCeinGw4MLD8L8Av4eA4KS4WsEdDunkJQYB7NNignt_KJ4PILFdOyoj5rgVTrpbhsyXOZM7qV_v9uF2MqDl4XMKJ6ngWIOH5-fM3KX7AFmnLfFnfbl9VSXbiSDoZfzb1WcMraicjU6tpVHDZAo3ryUG3kebtksBH45C5aGjNefrdh2SB7FVJtv-uz8yGJ0iQv26PGXc17OYlJqjw0gl_oRuloIlnRJEp7zFL05Vmsk6NZOmeKXbbZOLDrhpaRNp5LeQnLf598j0x0ZJKe3eVbQAy_338Um4TRFecK9VbT_llKoq6n_fOswAfapXjaidzv2fe8XM965NMgpEGOsnOYJUNzX8RhDEi-C-assp8olgPR5NKCeOjDVEidBpFzMFv4MYQHIeKIenveJtMdwQ_UWcZNramnkBCk87uf5XBGOhZj_kx76hOWDcXHRrE8H54aJFIwdlyT0tnAfGOonh4KxGcoqZhcBUcjvc6liRvSYLfDOBYKEL-goKvXs82Jxy4MUJxZzja9HyoRFVEpRXb3L8btrW8OdgIZ2wP-4WgE6hj47ZIxADSzmlnPQUsSPdxVyc-jWKpMER0QDEYprUjnYUZOk4XbXiYJGHMX9GbXMnD8eBOs-bqgM9FCg5gEZH4mGhKcg4DYQtPUdrO_EibsBYKqnvZy1NI1CdhQcpMBnOw42zuru0WlZxeJjuE-D5hODC8-_hNTBvjwcI-NCvsqJQw3OV5q2x4YMXKv3zFmc4crw-wOpqxWMkHpbZO9xGJvJqm5uuGBHmDkDJFezfhdp3JTZK7TcrnKc9M6xKZFns46-ea1Cx_WtJn9RsDQEU8lp5jqW9mtTjZ9AYiJqSuZ9d6Zw-SkdaFlF0nCPAq7URROAGK6i4DEZa7Ue43zhBbSR37EOAwUVELCwT0FSbZsAiSCscoyqmbCcblnjmtJrmgTnP9ZrSMPdyN7nFmnBqfU29ESJFmtSGEYb8yot8hKJqun7RaH4gedw37vo2Nsr1pESWkqXs9ykcAnE71Lkq3o4RXjUIFaalCCJnOY5kM72DNQSeigioYDblSJf2x0lb8np12SjLCOJBv5dbZkCMiDWq9u66tr0QIkZU0Rp4VsWRHikLFp3Q4J5NM1qwBm-zf8xKNU6Jfh-vN0XtA4QIooVkREy9yC_uizyQD-o6_RoO11_c1d-ZblVuuPQZVLLmHBnzPL1gw9U-J-hMV1cTXTXBU0xY2Ng-IwYrNrmASflLrnVRpY_xRN6ChVjzSRCQxlk2PnsjoOjVrj8yyrNL-iRGBS1z_GtFa4x65ya-3dH8GeGwBQZRdN3CpRx0sBdF_zip9E4vVPBnLSos08aXtbawr-HkwUfnstG0UDp04A2xB1IJ2r5LfMPYHIeQbP87aPR27Phoce9Z0sTNqiJzpxx-PTPxF3kFGWEP-0L7NzO0QFdzgnyNrJdyDe1qvDO8Ufhiw-pfCRj35fFOeC4qhys50s4VGWzJI3SdT_ZPdHHDoEhXPTDpIzyi3MvkDnLYzUc6ZAbXIj6mjnkKTj0LjecZ14mhBvy2lW_YtnELY73wLq-Qjn19M3iYJ0jes5x-pM_vOx2_QmAHSgpaK0rXl8c_FA9Lhqeh7djrndffy3MNmKzbHYbSfJVjDPS99Nqgspw9tfiAATtzHd5SyPje4fUmdL9gtnuDceiTMxS4MfUAnfbwbUu8ZGnuoO1FfLrkCGT6tBwZhBf7TD35EVevGKYE2-zlcb5tpoL8YmNXzzHq-D__eLPi7EHrUJl_vsAMJRcOEYTbupfZf7uNm00]--></g></svg>